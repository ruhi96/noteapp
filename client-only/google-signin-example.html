<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Google Sign-In - Pure Client Side</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            text-align: center;
        }
        .container {
            background: #f5f5f5;
            padding: 30px;
            border-radius: 10px;
        }
        button {
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background: #4285f4;
            color: white;
            margin: 10px;
        }
        button:hover {
            background: #357abd;
        }
        .user-info {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 5px;
        }
        .hidden {
            display: none;
        }
        img {
            border-radius: 50%;
            width: 80px;
            height: 80px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ”¥ Firebase Google Sign-In</h1>
        <p>Pure Client-Side (No Backend, No Admin SDK)</p>

        <!-- Sign In Section -->
        <div id="signInSection">
            <button id="googleSignInBtn">Sign in with Google</button>
        </div>

        <!-- User Info Section (Hidden initially) -->
        <div id="userSection" class="hidden">
            <h2>Welcome!</h2>
            <div class="user-info">
                <img id="userPhoto" src="" alt="Profile">
                <h3 id="userName"></h3>
                <p id="userEmail"></p>
                <p><strong>User ID:</strong> <span id="userId"></span></p>
            </div>
            <button id="signOutBtn">Sign Out</button>
        </div>
    </div>

    <!-- Firebase Web SDK (Client-Side Only) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <script>
        // =====================================================
        // STEP 1: Initialize Firebase (Client-Side)
        // NO SERVICE ACCOUNT, NO ADMIN SDK
        // =====================================================
        
        const firebaseConfig = {
            apiKey: "YOUR_FIREBASE_API_KEY",           // Get from Firebase Console
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",  // Get from Firebase Console
            projectId: "YOUR_PROJECT_ID"                // Get from Firebase Console
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        console.log('âœ… Firebase initialized (client-side)');

        // Get Firebase Auth instance
        const auth = firebase.auth();

        // =====================================================
        // STEP 2: Set up Google Auth Provider
        // =====================================================
        
        const googleProvider = new firebase.auth.GoogleAuthProvider();
        console.log('âœ… Google Auth Provider ready');

        // =====================================================
        // STEP 3: Google Sign-In Function
        // =====================================================
        
        async function signInWithGoogle() {
            try {
                console.log('ðŸ” Starting Google Sign-In...');
                
                // Sign in with popup - Pure client-side
                const result = await auth.signInWithPopup(googleProvider);
                
                // Get user information
                const user = result.user;
                console.log('âœ… Signed in successfully:', user.email);
                console.log('User object:', user);
                
            } catch (error) {
                console.error('âŒ Sign-in error:', error);
                alert('Sign-in failed: ' + error.message);
            }
        }

        // =====================================================
        // STEP 4: Sign Out Function
        // =====================================================
        
        async function signOut() {
            try {
                await auth.signOut();
                console.log('âœ… Signed out successfully');
            } catch (error) {
                console.error('âŒ Sign-out error:', error);
                alert('Sign-out failed: ' + error.message);
            }
        }

        // =====================================================
        // STEP 5: Listen to Auth State Changes
        // =====================================================
        
        auth.onAuthStateChanged((user) => {
            if (user) {
                // User is signed in
                console.log('ðŸ‘¤ User is signed in:', user.email);
                console.log('   UID:', user.uid);
                console.log('   Display Name:', user.displayName);
                console.log('   Photo URL:', user.photoURL);
                
                // Show user info
                showUserInfo(user);
            } else {
                // User is signed out
                console.log('ðŸ‘¤ No user signed in');
                showSignInButton();
            }
        });

        // =====================================================
        // STEP 6: Get Current User
        // =====================================================
        
        function getCurrentUser() {
            const currentUser = auth.currentUser;
            
            if (currentUser) {
                console.log('Current user:', currentUser.email);
                console.log('UID:', currentUser.uid);
                return currentUser;
            } else {
                console.log('No user currently signed in');
                return null;
            }
        }

        // =====================================================
        // UI Helper Functions
        // =====================================================
        
        function showUserInfo(user) {
            // Hide sign-in section
            document.getElementById('signInSection').classList.add('hidden');
            
            // Show user section
            const userSection = document.getElementById('userSection');
            userSection.classList.remove('hidden');
            
            // Display user information
            document.getElementById('userName').textContent = user.displayName || 'User';
            document.getElementById('userEmail').textContent = user.email;
            document.getElementById('userId').textContent = user.uid;
            document.getElementById('userPhoto').src = user.photoURL || 'https://via.placeholder.com/80';
        }

        function showSignInButton() {
            // Show sign-in section
            document.getElementById('signInSection').classList.remove('hidden');
            
            // Hide user section
            document.getElementById('userSection').classList.add('hidden');
        }

        // =====================================================
        // Event Listeners
        // =====================================================
        
        document.getElementById('googleSignInBtn').addEventListener('click', signInWithGoogle);
        document.getElementById('signOutBtn').addEventListener('click', signOut);

        // =====================================================
        // Example: Access current user anywhere in your code
        // =====================================================
        
        // You can call this anywhere to get the current user
        setTimeout(() => {
            const user = getCurrentUser();
            if (user) {
                console.log('ðŸ“‹ Current user check:', user.email);
            }
        }, 2000);
    </script>
</body>
</html>

